You are a senior Flutter developer and system architect.

Design and generate a complete Flutter application for a Bar and Hotel Invoice Management System that supports Bluetooth thermal printers.

CORE REQUIREMENTS:
1. The application must be built using Flutter (latest stable version).
2. Target platform: Android (primary), with clean architecture and scalable structure.
3. The system must generate invoices and send them to a Bluetooth thermal printer.

FUNCTIONAL MODULES:

1. STOCK / ITEM MANAGEMENT
- Ability to add, edit, and delete stock/items.
- Fields: Item Name, Category (Drinks/Food/Room/etc), Unit Price, Quantity Available.
- Support price updates at any time.
- Items selectable during invoice creation.

2. INVOICE GENERATION
- Create invoices by selecting items and quantities.
- Automatic calculation of subtotal, tax (optional), discount (optional), and grand total.
- Unique invoice number generation.
- Date and time auto-generated.
- Support up to 6 different invoice templates/layouts that the user can choose from.
- Each invoice format should differ in layout (compact, detailed, logo-centered, etc).

3. BLUETOOTH PRINTING
- Scan and connect to Bluetooth thermal printers.
- Print invoices in ESC/POS compatible format.
- Support 58mm and 80mm printers.
- Include printer configuration settings.

4. CONFIGURATION / SETTINGS MODULE
- Organization Name
- Address
- Phone Number
- Logo upload (used in invoice print)
- System password (basic security for accessing settings)
- Currency configuration
- Enable/disable tax and discount
- Select default invoice format
- Update item prices from this section

5. USER INTERFACE
- Simple, fast, POS-style UI optimized for touch.
- Dashboard with quick access to:
  - New Invoice
  - Items / Stock
  - Invoice History
  - Settings
- Offline-first (no internet dependency required).

6. DATA STORAGE
- Use local database (SQLite / Hive).
- Persist invoices, items, and configuration data.
- Invoice history with reprint capability.

TECHNICAL DETAILS:
- Use proper state management (Provider / Riverpod / Bloc ‚Äì choose best fit).
- Follow clean architecture (presentation, domain, data layers).
- Include example models, services, repositories, and UI screens.
- Include sample Bluetooth printing logic and ESC/POS formatting.
- Include example invoice templates (at least 2 fully implemented).

DELIVERABLES:
- Project folder structure
- Key Dart files with explanations
- Sample UI widgets
- Database schema
- Bluetooth printer integration example
- Suggestions for extending to cloud sync later

Explain each major section clearly and provide production-quality Flutter code snippets.























=====================================================================================


To get better results, don‚Äôt run it once and expect everything üòÑ
Use it in stages:

1Ô∏è‚É£ First Run

Ask the AI to:

‚ÄúGenerate the system architecture & folder structure only‚Äù

2Ô∏è‚É£ Second Run

Then say:

‚ÄúNow generate the Stock & Item Management module with Flutter code‚Äù

3Ô∏è‚É£ Third Run

‚ÄúGenerate Bluetooth ESC/POS printing logic for thermal printers‚Äù

4Ô∏è‚É£ Later

‚ÄúDesign 6 invoice templates optimized for 58mm & 80mm printers‚Äù

üß† Pro Tip (Real-World)

For Bluetooth printing in Flutter, you‚Äôll likely use:

blue_thermal_printer

esc_pos_utils

flutter_blue_plus





=====================================================================================================

üß© TASK-BASED PROMPTS (Run in Order)

Each prompt is small, focused, and realistic ‚Äî exactly how senior devs work.

üèóÔ∏è TASK 1: System Architecture & Folder Structure
Design the overall system architecture for a Flutter-based
Bar and Hotel Invoice Management application.

Include:
- Clean architecture layers (presentation, domain, data)
- Folder structure
- State management choice and justification
- Local database choice
- Bluetooth printing service placement

Do not generate UI or business logic yet.
Focus only on architecture and scalability.

üóÑÔ∏è TASK 2: Local Database Design
Design the local database schema for the application.

Include tables/models for:
- Items / Stock
- Invoice
- Invoice Items
- Organization Settings
- Printer Settings

Explain relationships and indexing.
Provide Dart model examples and database helper structure.

üì¶ TASK 3: Stock / Item Management Module
Implement the Stock / Item Management module in Flutter.

Requirements:
- Add, edit, delete items
- Fields: name, category, price, available quantity
- Price update support
- Persist data locally
- POS-friendly UI

Provide:
- Models
- Repository
- State management logic
- Sample UI screens and widgets

üßæ TASK 4: Invoice Creation Logic
Implement the Invoice Creation module.

Features:
- Select items from stock
- Enter quantities
- Auto-calculate subtotal, tax, discount, and total
- Generate unique invoice number
- Save invoice locally
- Invoice preview before printing

Provide:
- Business logic
- State management
- UI flow
- Invoice calculation service

üé® TASK 5: Invoice Template Engine (6 Formats)
Design an invoice template engine that supports
up to 6 selectable invoice formats.

Each format should vary in:
- Layout density (compact vs detailed)
- Logo placement
- Font emphasis
- Alignment

Include:
- Template selector logic
- Example implementation for at least 2 templates
- Extendable design for adding more templates

üñ®Ô∏è TASK 6: Bluetooth Thermal Printing (ESC/POS)
Implement Bluetooth thermal printing support in Flutter.

Requirements:
- Scan and connect to Bluetooth printers
- Support 58mm and 80mm printers
- ESC/POS formatting
- Print invoices using selected template
- Printer configuration screen

Provide:
- Recommended Flutter packages
- Bluetooth service class
- ESC/POS helper functions
- Sample print output formatting

‚öôÔ∏è TASK 7: Configuration & Settings Module
Implement the Settings and Configuration module.

Features:
- Organization name, address, phone
- Logo upload and storage
- System password for settings access
- Currency selection
- Tax & discount enable/disable
- Default invoice format selection
- Price update access

Provide:
- Secure storage approach
- UI screens
- State management
- Data persistence logic

üìú TASK 8: Invoice History & Reprint
Implement Invoice History functionality.

Features:
- View previous invoices
- Filter by date
- View invoice details
- Reprint invoice via Bluetooth

Provide:
- Database queries
- UI list view
- Reprint workflow

üß† TASK 9: POS UI/UX Optimization
Optimize the UI/UX for fast POS usage.

Focus on:
- Large touch targets
- Minimal clicks
- Fast invoice creation
- Error prevention

Provide UI best practices and Flutter widget examples.

üîê TASK 10: Security & Stability
Add basic security and stability features.

Include:
- Settings password protection
- Input validation
- Error handling
- Backup & restore (local)
- App-level configuration locking

Explain trade-offs and limitations.

üöÄ TASK 11: Production Readiness & Extensions
Prepare the application for production.

Include:
- App performance tips
- Printer reliability handling
- Future cloud sync design
- Multi-branch support extension
- GST/VAT compliance extension

üß™ BONUS: DEBUGGING PROMPT (Very Useful)
You are debugging a Flutter POS application.

Analyze the following issue:
[PASTE ERROR HERE]

Explain:
- Root cause
- Fix
- Best practice to avoid it in future

üí° Why This Works

‚úî Forces the AI to think like a senior dev
‚úî Prevents hallucinated spaghetti code
‚úî Lets you control complexity
‚úî Easy to reuse for future POS projects
